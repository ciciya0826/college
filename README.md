# typing_dance
打字跳舞机
基于PyGame的下落式音符判定音乐节奏游戏，玩家通过按下与下落方块匹配的字母键得分，包含多阶段难度升级、角色动画和音效反馈。


## 一、项目结构
```
project-root/
├─ assets/               # 资源目录
│  ├─ images/            # 图片资源
│  │  ├─ pose0.jpg       # 角色待机动作帧
│  │  ├─ pose1-left.jpg  # 角色动作帧（左）
│  │  └─ stage.jpg       # 背景图片
│  └─ sounds/            # 音效资源
│     ├─ perfect.MP3     # 完美判定音效
│     ├─ good.MP3        # 良好判定音效
│     └─ fail.MP3        # 失败音效
├─ src/                  # 源代码目录
│  ├─ game.py            # 核心游戏逻辑
│  ├─ main.py            # 程序入口
│  └─ settings.py        # 配置参数
├─ README.md             # 项目说明
└─ requirements.txt      # 依赖清单
```


## 二、技术栈
- **语言/框架**：Python 3.x + PyGame 2.x  
- **核心技术**：  
  - 面向对象编程（OOP）实现模块化开发  
  - 基于时间的动画帧切换机制  
  - 动态音效音量调整与错误处理  
  - 多阶段难度升级系统  


## 三、功能特性
1. **下落式音符判定**  
   - 4条轨道随机生成带字母的方块，玩家需按下对应字母键  
   - 判定精度分为 **Perfect**（距离≤30px）、**Good**（30px<距离≤40px）、**Hit**（其他）  
   - 判定结果实时显示得分（Perfect+20/Good+50/Hit+100），连击数（Combo）累计加分  

2. **多阶段难度系统**  
   - 4个游戏阶段（Basic/Advanced/Epic/Ultimate）  
   - 阶段升级条件：得分达到1000/3000/6000分  
   - 阶段特性：  
     - 角色动画升级（如待机动作、舞蹈动作复杂度提升）  
     - 音效类型切换（普通→回声→立体声→管弦乐）  
     - 方块下落速度递增（初始3px/帧，最高10px/帧）  

3. **交互反馈系统**  
   - **视觉**：判定结果文字（金色/绿色/红色）、角色舞蹈动画、渐变背景  
   - **听觉**：不同判定音效、阶段升级音效、循环背景音乐  
   - **触觉**：按键即时响应，连击时音效节奏同步  


## 四、运行指南
### 环境要求
- Python 3.7+  
- PyGame 2.1.0+  

### 安装依赖
```bash
pip install -r requirements.txt
```

### 启动游戏
```bash
python src/main.py
```

### 操作说明
- **开始游戏**：按空格（Space）键  
- **输入方式**：按下与方块字母匹配的键盘字母键（大写）  
- **退出游戏**：按空格（Space）键（游戏运行时）或关闭窗口  


## 五、类结构说明
### 核心类列表
| 类名               | 职责描述                                                                 |
|--------------------|--------------------------------------------------------------------------|
| `Game`             | 游戏主控制器，管理全局状态、方块生成、判定逻辑、阶段升级                 |
| `Character`        | 角色实体，处理图片加载、动画状态控制、按键反馈响应                       |
| `CharacterAnimator`| 角色动画控制器，管理动作帧切换、舞蹈序列、阶段动画集切换                 |
| `CharacterBlock`   | 下落方块实体，包含位置、速度、颜色、字母等属性                           |
| `SoundManager`     | 音效管理器，负责音效加载、动态音量调整、多阶段音效切换                   |


